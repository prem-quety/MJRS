# Turn off MultiViews so Apache doesn't guess weird matches
Options -MultiViews

# Serve index.php by default
DirectoryIndex index.php

RewriteEngine On

# --- Canonical redirect: /page.php -> /page  (301 for SEO)
RewriteCond %{THE_REQUEST} \s/([^.]+)\.php[?\s] [NC]
RewriteRule ^ %1 [R=301,L,NE]

# --- If the requested path isn't a real file/dir, but a .php exists, serve it
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+?)/?$ $1.php [L]

# --- Optional: force trailing slash off (keeps /page not /page/)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]
